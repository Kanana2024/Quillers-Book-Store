{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Checkout - Quillers</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        body { background:#f8f9fa;font-family: 'Poppins', sans-serif; margin:0; }

        header {
            background: linear-gradient(135deg, #1e3a8a, #3b82f6);
            padding: 1rem 0;
        }

        .nav-container {
            max-width:1200px;
            margin:auto;
            display:flex;
            justify-content:space-between;
            align-items:center;
            padding:0 20px;
        }

        .logo {
            color:white;
            text-decoration:none;
            font-size:1.3rem;
            font-weight:700;
        }

        nav ul {
            list-style:none;
            display:flex;
            gap:20px;
        }

        nav ul li a {
            color:white;
            text-decoration:none;
            font-size:0.95rem;
        }
        .container{
            width: 80%;
            margin: 50px auto;
        }
        .checkoutbox{
            display: flex;
            margin-top: -70px;
        }
        .checkleft{
            flex-basis: 55%;
            padding: 40px 60px;
        }
        .checkright{
            flex-basis: 45%;
            padding: 40px;
            margin-top: 90px;
        }
        .text-card{
                background-color: white;
                padding: 20px;
        }
        form{
            select{
                font-size: 15px;
            }
        }
    </style>
</head>
<body>

<header>
    <div class="nav-container">
        <a href="{% url 'home' %}" class="logo">
            <i class="fas fa-book-open"></i> Quillers Book Store
        </a>
        <nav>
            <ul>
                <li><a href="{% url 'home' %}"><i class="fas fa-home"></i> Home</a></li>
                <li><a href="{% url 'about' %}"><i class="fas fa-info-circle"></i>About</a></li>
                <li><a href="{% url 'books' %}"><i class="fas fa-book"></i> Books</a></li>
                <li><a href="{% url 'authors' %}"><i class="fas fa-pen-fancy"></i> Authors</a></li>
            </ul>
        </nav>
    </div>
</header>
    <div class="container">
    <div class="checkoutbox">

        <!-- LEFT SIDE -->
        <div class="checkleft">
            <h2 style="color:#1e3a8a;">Checkout</h2>
            <div style="max-width:490px; border-top:2px solid #1e3a8a; margin:15px 0;"></div>

            <form method="POST">
                {% csrf_token %}

                <h3 style="color:#1e3a8a;">Delivery</h3>
                 <div style="margin-top:15px;">
                    <label>Choose Branch</label>
                    <select name="branch_id" required
                            style="width:80%; padding:10px; border-radius:6px; border:1px solid #cbd5e1;">
                        {% for branch in branches %}
                            <option value="{{ branch.branchid }}">
                                {{ branch.branchname }}
                            </option>
                        {% endfor %}
                        </select>
                </div>
                <div style="margin-top:15px;">
                    <label>Delivery Location</label>
                    <input type="text" name="delivery_address" required
                           style="width:80%; padding:10px; border-radius:6px; border:1px solid #cbd5e1;">
                </div>

                <h3 style="color:#1e3a8a;">Payment</h3>
                <label style="font-weight:600;">Delivery Method</label>

                <div style="margin-top:10px;">
                    <label>
                        <input type="radio" name="delivery_method" value="pickup" required>
                        Pick up from branch
                    </label>
                </div>

                <div style="margin-top:8px;padding-bottom: 12px;">
                    <label>
                        <input type="radio" name="delivery_method" value="delivery">
                        Home delivery (KSh 190)
                    </label>
                </div>

                <div class="text-card" style="line-height:1.4; padding:12px; border:1px solid #e5e7eb;">
                    <p>Pay via M-Pesa Paybill</p>
                    <p>Business Number: <strong>629531</strong></p>
                    <p>Account Number: <strong>5899180</strong></p>
                    <p>Amount: <strong>KSh {{ total }}</strong></p>
                    <p style="margin-top:8px; font-size:14px;">
                        After payment, press “Place Order” and wait for confirmation.
                    </p>
                </div>

                <button type="submit"
                        style="width:100%; margin-top:25px; padding:12px; border:none; border-radius:50px;
                               background:#1e3a8a; color:white; font-weight:600;">
                    Place Order
                </button>
            </form>
        </div>

        <!-- RIGHT SIDE -->
        <div class="checkright">
            <h3 style="color:#1e3a8a;">Order Summary</h3>

            {% for item in cart_items %}
                <div style="display:flex; justify-content:space-between; margin-bottom:8px;">
                    <span>{{ item.book.booktitle }} × {{ item.quantity }}</span>
                    <span>KSh {{ item.subtotal }}</span>
                </div>
            {% endfor %}

            <div style="display:flex; justify-content:space-between;
                        font-weight:700; color:#1e3a8a;
                        border-top:2px solid #1e3a8a; margin-top:15px; padding-top:10px;">
                <span>Total</span>
                <span>KSh {{ total }}</span>
            </div>
        </div>

    </div>
</div>

</body>
</html>
